58<div class="ppx-main-block" style="padding-left: 10%;">
 <h2>
  【Python 第58课】正则表达式（5）
 </h2>
 <br/>
 <p>
  听说有人已经开始国庆假期了，甚至还有人中秋之后就请了年假一休到底，表示羡慕嫉妒恨！今天发完这课，我也要进入休假状态，谁也别拦着我。
 </p>
 <p>
 </p>
 <p>
  来说上次的习题：
 </p>
 <p>
  (021)88776543
 </p>
 <p>
  010-55667890
 </p>
 <p>
  02584453362
 </p>
 <p>
  0571 66345673
 </p>
 <p>
 </p>
 <p>
  一个可以匹配出所有结果的表达式是
 </p>
 <p>
  \(?0\d{2,3}[) -]?\d{7,8}
 </p>
 <p>
 </p>
 <p>
  解释一下：
 </p>
 <p>
  \(?
 </p>
 <p>
  ()在正则表达式里也有着特殊的含义，所以要匹配字符"("，需要用"\("。?表示这个括号是可有可无的。
 </p>
 <p>
 </p>
 <p>
  0\d{2,3}
 </p>
 <p>
  区号，0xx或者0xxx
 </p>
 <p>
 </p>
 <p>
  [) -]?
 </p>
 <p>
  在区号之后跟着的可能是")"、" "、"-"，也可能什么也没有。
 </p>
 <p>
 </p>
 <p>
  \d{7,8}
 </p>
 <p>
  7或8位的电话号码
 </p>
 <p>
 </p>
 <p>
  可是，这个表达式虽然能匹配出所有正确的数据（一般情况下，这样已经足够），但理论上也会匹配到错误的数据。因为()应当是成对出现的，表达式中对于左右两个括号并没有做关联处理，例如(02188776543这样的数据也是符合条件的。
 </p>
 <p>
 </p>
 <p>
  我们可以用正则表达式中的“|”符号解决这种问题。“|”相当于python中“or”的作用，它连接的两个表达式，只要满足其中之一，就会被算作匹配成功。
 </p>
 <p>
 </p>
 <p>
  于是我们可以把()的情况单独分离出来：
 </p>
 <p>
  \(0\d{2,3}\)\d{7,8}
 </p>
 <p>
 </p>
 <p>
  其他情况：
 </p>
 <p>
  0\d{2,3}[ -]?\d{7,8}
 </p>
 <p>
 </p>
 <p>
  合并：
 </p>
 <p>
  \(0\d{2,3}\)\d{7,8}|0\d{2,3}[ -]?\d{7,8}
 </p>
 <p>
 </p>
 <p>
  使用“|”时，要特别提醒注意的是不同条件之间的顺序。匹配时，会按照从左往右的顺序，一旦匹配成功就停止验证后面的规则。假设要匹配的电话号码还有可能是任意长度的数字（如一些特殊的服务号码），你应该把
 </p>
 <p>
  |\d+
 </p>
 <p>
  这个条件加在表达式的最后。如果放在最前面，某些数据就可能会被优先匹配为这一条件。你可以写个测试用例体会一下两种结果的不同。
 </p>
 <p>
 </p>
 <p>
  关于正则表达式，我们已经讲了5篇，介绍了正则表达式最最皮毛的一些用法。接下来，这个话题要稍稍告一段落。推荐一篇叫做《正则表达式30分钟入门教程》的文章（直接百度一下就能找到，我也会转到论坛上），想要对正则表达式进一步学习的同学可以参考。这篇教程是个标题党，里面涉及了正则表达式较多的内容，30分钟绝对看不完。
 </p>
 <p>
 </p>
 <p>
  好了，祝大家过个欢脱的长假，好好休息，多陪家人。
 </p>
 <nav aria-label="...">
  <ul class="pager">
   <li class="previous">
    <a href="../59">
     <span aria-hidden="true">
      ←
     </span>
     57.正则表达式（4）
    </a>
   </li>
   <li class="next">
    <a href="../61">
     59.随机数
     <span aria-hidden="true">
      →
     </span>
    </a>
   </li>
  </ul>
 </nav>
</div>

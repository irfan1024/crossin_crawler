71<div class="ppx-main-block" style="padding-left: 10%;">
 <h2>
  【Python 第71课】reduce 函数
 </h2>
 <br/>
 <p>
  上次说了 Python 中一个比较有意思的内置函数 map，今天再来介绍另一个类似的函数：reduce
 </p>
 <p>
 </p>
 <p>
  map 可以看作是把一个序列根据某种规则，映射到另一个序列。reduce 做的事情就是把一个序列根据某种规则，归纳为一个输出。在 Python3 里，reduce已经被移出内置函数，使用 reduce 需要先通过 from functools import reduce 引入。
 </p>
 <p>
 </p>
 <p>
  上栗子。以前我们给过一个习题，求1累加到100的和。寻常的做法大概是这样：
 </p>
 <pre class="language-python"><code>sum = 0
for i in range(1, 101):
    sum += i
print (sum)</code></pre>
 <p>
 </p>
 <p>
  如果用 reduce 函数，就可以写成：
 </p>
 <pre class="language-python"><code>from functools import reduce

lst = range(1, 101)
def add(x, y):
    return x + y
print (reduce(add, lst))</code></pre>
 <p>
 </p>
 <p>
  解释一下：
 </p>
 <pre class="language-python"><code>reduce(function, iterable[, initializer])</code></pre>
 <p>
  第一个参数是作用在序列上的方法，第二个参数是被作用的序列，这与 map 一致。另外有一个可选参数，是初始值。
 </p>
 <p>
  function 需要是一个接收2个参数，并有返回值的函数。它会从序列 iterable 里从左到右依次取出元素，进行计算。每次计算的结果，会作为下次计算的第一个参数。
 </p>
 <p>
  提供初始值 initializer 时，它会作为第一次计算的第一个参数。否则，就先计算序列中的前两个值。
 </p>
 <p>
 </p>
 <p>
  如果把刚才的 lst 换成 [1,2,3,4,5]，那 reduce(add, lst) 就相当于 ((((1+2)+3)+4)+5)。
 </p>
 <p>
 </p>
 <p>
  同样，可以用 lambda 函数：
 </p>
 <pre class="language-python"><code>from functools import reduce

reduce((lambda x, y: x + y), range(1, 101))</code></pre>
 <p>
 </p>
 <p>
  所以，在对于一个序列进行某种统计操作的时候，比如求和，或者诸如统计序列中元素的出现个数等（可尝试下如何用 reduce 做到），可以选择使用 reduce 来实现。相对可以使代码更简洁。
 </p>
 <p>
 </p>
 <p>
  我觉得，写代码的可读性是很重要的事情，简洁易懂的代码，既容易让别人看懂，也便于自己以后的维护。同时，较少的代码也意味着比较高的开发效率和较少的出错可能。应尽量避免写混乱冗长的代码。当然，也不用为了一味追求代码的精简，总是想方设法把代码写在一行里。那就又走了另一个极端，同样也缺乏可读性。而至于是否使用类似 map、reduce 这样的方法，也是根据需要和个人习惯，我认为并没有一定的规则限制。
 </p>
 <nav aria-label="...">
  <ul class="pager">
   <li class="previous">
    <a href="../72">
     <span aria-hidden="true">
      ←
     </span>
     70.map 函数
    </a>
   </li>
   <li class="next">
    <a href="../74">
     72.多线程
     <span aria-hidden="true">
      →
     </span>
    </a>
   </li>
  </ul>
 </nav>
</div>
